<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SZ OBF V8 | VM EDITION</title>
    <style>
        :root { --b: #0044ff; --r: #ff0022; --g: #00ff88; }
        body { background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; justify-content: center; height: 100vh; width: 100vw; overflow: hidden; }
        .main-box { width: 100%; height: 100%; background: #050505; border: 4px solid var(--b); display: flex; flex-direction: column; padding: 15px; box-sizing: border-box; box-shadow: inset 0 0 50px rgba(0, 68, 255, 0.2); }
        h1 { text-align: center; color: var(--r); text-shadow: 0 0 20px var(--r); font-size: 24px; margin: 5px 0; }
        textarea { flex: 1; background: #000; color: var(--g); border: 1px solid #222; border-radius: 10px; padding: 12px; font-family: monospace; font-size: 13px; outline: none; margin-bottom: 10px; resize: none; box-shadow: inset 0 0 10px #000; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 10px; }
        button, .label { padding: 18px 5px; font-weight: bold; border: none; border-radius: 12px; cursor: pointer; color: #fff; text-align: center; font-size: 14px; transition: 0.2s; text-transform: uppercase; }
        .btn-b { background: linear-gradient(45deg, #0011bb, var(--b)); border-bottom: 4px solid #000c88; }
        .btn-r { background: linear-gradient(45deg, #bb0011, var(--r)); border-bottom: 4px solid #880000; }
        button:active { transform: translateY(2px); border-bottom: 0; margin-bottom: 4px; }
        #out { border-color: var(--r); color: var(--r); flex: 0.6; }
        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #111; padding: 25px; border: 2px solid var(--b); border-radius: 20px; z-index: 1000; width: 85%; }
    </style>
</head>
<body>

<div class="main-box">
    <h1>SZ OBFUSCATOR V8 (VM) ğŸ”¥</h1>
    
    <textarea id="in" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯Ùƒ Ù‡Ù†Ø§..."></textarea>
    
    <div class="grid">
        <label class="label btn-b">ğŸ“ Ø±ÙØ¹ Ù…Ù„Ù<input type="file" style="display:none" onchange="hdl(this)"></label>
        <button class="btn-r" onclick="vm_obf()">ğŸš€ ØªØ´ÙÙŠØ± Ø§Ù„Ù€ VM</button>
        <button class="btn-b" onclick="cp()">ğŸ“‹ Ù†Ø³Ø®</button>
        <button class="btn-r" onclick="show_m()">ğŸ’¾ ØªØ­Ù…ÙŠÙ„</button>
    </div>

    <textarea id="out" readonly placeholder="Ø§Ù„Ù†Ø§ØªØ¬ Ø§Ù„Ù…Ø´ÙØ± Ø¨Ù†Ø¸Ø§Ù… Ø§Ù„Ù€ VM Ø§Ù„Ø´Ø§Ù…Ù„..."></textarea>
</div>

<div id="m" class="modal">
    <input type="text" id="fn" style="width:100%; padding:15px; margin-bottom:15px; background:#000; color:#fff; border:1px solid var(--b); border-radius:10px;" placeholder="script_name.lua">
    <button class="btn-b" style="width:100%" onclick="save()">ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ù…Ø´ÙØ±</button>
    <button class="btn-r" style="width:100%; margin-top:10px;" onclick="show_m()">Ø¥Ù„ØºØ§Ø¡</button>
</div>

<script>
    function hdl(i){let f=i.files[0];let r=new FileReader();r.onload=function(){document.getElementById('in').value=r.result};r.readAsText(f)}

    // Ù…Ø­Ø§ÙƒÙŠ ØªØ´ÙÙŠØ± VM (Virtual Machine Bytecode)
    function vm_obf() {
        let code = document.getElementById('in').value;
        if(!code) return alert("Ø¶Ø¹ ÙƒÙˆØ¯Ùƒ Ø£ÙˆÙ„Ø§Ù‹!");

        // 1. ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¥Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… (Virtualizing)
        let v = [];
        for (let i = 0; i < code.length; i++) { v.push(code.charCodeAt(i) ^ 0x55); } // XOR encryption

        // 2. Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù€ VM Loader (Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ù„ÙŠ ÙŠØ´ØºÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø´ÙØ±)
        let vm_engine = `
--[[ SZ PROTECTED VM ]]--
local _VM_DATA = {${v.join(',')}}
local _VM_KEY = 85
local _VM_EXEC = ""
for i=1, #_VM_DATA do 
    _VM_EXEC = _VM_EXEC .. string.char(bit32.bxor(_VM_DATA[i], _VM_KEY)) 
end
local _SZ_SUCCESS, _SZ_ERROR = pcall(function()
    return (loadstring or load)(_VM_EXEC)()
end)
if not _SZ_SUCCESS then warn("[SZ VM ERROR]: " .. tostring(_SZ_ERROR)) end
        `.trim();

        document.getElementById('out').value = vm_engine;
        alert("âœ… ØªÙ… Ø§Ù„ØªØ´ÙÙŠØ± Ø¨Ù†Ø¸Ø§Ù… Ø§Ù„Ù€ VM Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ!");
    }

    function cp(){let o=document.getElementById('out');o.select();document.execCommand('copy');alert("ØªÙ… Ø§Ù„Ù†Ø³Ø®!")}
    function show_m(){let d=document.getElementById('m');d.style.display=(d.style.display==='block'?'none':'block')}
    function save(){
        let n=document.getElementById('fn').value;
        if(!n.endsWith(".lua")) return alert("ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙ†ØªÙ‡ÙŠ Ø¨Ù€ .lua");
        let b=new Blob([document.getElementById('out').value],{type:"text/plain"});
        let l=document.createElement("a");l.download=n;l.href=window.URL.createObjectURL(b);l.click();
    }
</script>

</body>
</html>
